May 22, 2015</time>
  <h1 class="article_title">
    <a href="http://gavinandresen.ninja/are-bigger-blocks-better-for-bigger-miners">Are bigger blocks better for bigger miners?</a>
  </h1>
	<p>After taking a break to help review some pull requests and take a trip to New York, I’m ready to continue tackling objections to increasing the block size:</p>
<blockquote class="short">
<p>Bigger blocks give bigger miners an economic advantage</p>
</blockquote>
<p>This is a hard blog post to write; the arguments for <strong>why</strong> bigger blocks give bigger miners an economic advantage over smaller miners are highly technical (whenever I use the term “miner” in this post I really mean “solo miner or mining pool”).</p>

<p>To start: think about what happens when a miner gets lucky and finds a new block. They send it to their peers and immediately start working on finding another block on top of that new block.</p>

<p>Their peers will receive and validate the block, and, assuming validation passes, they then relay the block to <em>their</em> peers and start mining on top of the new block. The original miner is busy working during this whole validate-then-relay process; they have a head-start because they know about the new block before anybody else.</p>

<p>If all the miners have about the same hashing power, then the head-start doesn’t matter– they all benefit about the same amount. </p>

<p>If the miners don’t all have the same hashing power, then it gets complicated. Bigger miners have an advantage, but how much of an advantage?</p>

<p>I <a href="https://github.com/gavinandresen/bitcoin_miningsim" rel="nofollow">ran some simulations</a>, and if blocks take 20 seconds to propagate, a network with a miner that has 30% of the hashing power will get 30.3% of the blocks.</p>

<p>To put that extra 0.3% in perspective, here are a couple of recent profitability calculation froms the </p>

<p>0.3% is in the noise, miner profitability varies much more than that from week to week.</p>

<p>We’ve just started to optimize block propagation for Bitcoin Core (see <a href="https://github.com/bitcoin/bitcoin/pull/6077" rel="nofollow">pull request #6077</a> or <a href="http://sourceforge.net/p/bitcoin/mailman/message/31604935/" rel="nofollow">Matt Corallo’s high-speed relay network</a> for example), and I’m confident that we will have 20MB blocks propagating across the network more quickly than 1MB blocks propagate today, eliminating even that small 0.3% advantage.</p>

<p>Longer term, I’m also confident smarter synchronization algorithms will get even much larger blocks propagating even more quickly.</p>

<hr>

<p>All of the above assumes that miners are economically rational; that they’re not trying to mine blocks that destroy the network.</p>

<p>What if that is a bad assumption? Do 20MB blocks increase the risk that somebody with a lot of money to burn will try to use it to take down the Bitcoin network? Are there attacks possible with 20MB blocks that are <em>not</em> possible with 1MB blocks?  Lets look at some possible attacks:</p>
<h2 id="miner-purposely-creates-a-block-that-takes-se_2">Miner purposely creates a block that takes several minutes to validate <a class="head_anchor" href="http://gavinandresen.ninja/are-bigger-blocks-better-for-bigger-miners#miner-purposely-creates-a-block-that-takes-se_2" rel="nofollow">#</a>
</h2>
<p>If a miner can create blocks that takes other miners a very long time to validate, and the miner is trying to attack the network and has a lot of hashing power, it becomes easier for that miner to dominate the network to censor or roll-back transactions.</p>

<p>I find it hard to worry much about this attack, because I find it difficult to believe that an economically irrational attacker would have the resources to successfully mount an attack with expensive-to-validate blocks, but would not have the resources to simply mount a brute-force 51% or selfish-mining attack. I find all of the “invest a lot of money or effort to subvert mining” attacks implausible; mounting a sustained DDOS attacks against the network would probably be much less expensive and more effective.</p>

<p>Nevertheless, I will propose that 20MB blocks limit transactions to 100kilobytes to mitigate this theoretical attack (which we’ve known about for over two years now;  see <a href="https://bitcointalk.org/?topic=140078" rel="nofollow">this discussion</a>).</p>
<h2 id="miner-is-tricked-into-creating-a-block-that-t_2">Miner is tricked into creating a block that takes a long time to propagate <a class="head_anchor" href="http://gavinandresen.ninja/are-bigger-blocks-better-for-bigger-miners#miner-is-tricked-into-creating-a-block-that-t_2" rel="nofollow">#</a>
</h2>
<p>Maybe you’re not worried about marginal, malicious miners, but you are worried that an honest miner might be tricked into creating a block that propagates slowly.</p>

<p>For example, an attacker might create 20 megabytes worth of double-spent transactions, and give the network one set of spends but feed a target miner the other set of spends. That will make the miner spend more time validating blocks that are found by the network, and will make the miner’s blocks propagate more slowly, because normally a block is full of transactions that the network has already seen and validated.</p>

<p>I’m not worried about this attack, because I’ve already benchmarked how long it takes to validate a 20MB block full of never-before-seen transactions– it takes about twenty seconds, which is simply not a big deal with a 600-second block time. And Bitcoin Core already has <a href="https://github.com/bitcoin/bitcoin/blob/master/src/main.h#L56" rel="nofollow">rules in place</a> to prevent attackers from giving miners transactions that take a very long time to validate.</p>

<p>If the attacker’s goal is to put the honest miner out of business, this is a poor attack; it will decrease the number of blocks found by the honest miner by a tiny fraction of a percent.</p>

<p>If the attacker’s goal is to pull off a successful 0-confirmation double-spend, this is also a very poor attack. The transaction fees required to stuff a 20MB block full of the attacker’s transactions will easily overwhelm any marginal advantage they might gain from causing a slower-to-propagate-than-normal block.</p>
<h2 id="marginal-miners-are-left-behind-because-they_2">Marginal miners are left behind because they can’t afford… <a class="head_anchor" href="http://gavinandresen.ninja/are-bigger-blocks-better-for-bigger-miners#marginal-miners-are-left-behind-because-they_2" rel="nofollow">#</a>
</h2>
<p>I covered the cost of running a full node in a <a href="http://gavinandresen.ninja/does-more-transactions-necessarily-mean-more-centralized" rel="nofollow">previous post</a>. Even without any further optimizations (and we <a href="https://github.com/bitcoin/bitcoin/pull/6064" rel="nofollow">are</a> <a href="https://github.com/bitcoin/bitcoin/pull/907" rel="nofollow">busy</a> <a href="https://github.com/bitcoin/bitcoin/pull/3753" rel="nofollow">optimizing</a>) it is not expensive to run a node capable of validating 20MB blocks.</p>
<h1 id="what-am-i-missing_1">What am I missing? <a class="head_anchor" href="http://gavinandresen.ninja/are-bigger-blocks-better-for-bigger-miners#what-am-i-missing_1" rel="nofollow">#</a>
</h1>
<p>I was worried that I would find out 20MB blocks would give big miners a significant advantage before I started working on this post a week ago. I’m not worried any more, but please send me email if there is something I’ve missed.</p>
