<!DOCTYPE html>
<!-- saved from url=(0053)http://gavinandresen.ninja/segregated-witness-is-cool -->
<html lang="en" class="wf-proximanova-n7-active wf-proximanova-n1-active wf-proximanova-n6-active wf-proximanova-n4-active wf-freightsanspro-n7-active wf-freightsanspro-n9-active wf-proximanova-i4-active wf-proximanova-n3-active wf-active"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  
  <script async="" src="./Segregated Witness is cool_files/analytics.js.download"></script><script src="./Segregated Witness is cool_files/dgo2ztv.js.download" async=""></script><script>(function(d) {var config = {kitId: 'dgo2ztv',scriptTimeout: 1000,async: true},h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)})(document);</script>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  
  <link rel="stylesheet" media="all" href="./Segregated Witness is cool_files/build.blog-4020057bed35224ea81f6586f5b788ac82298f0d75219eceea7a82803eb5a39a.css" data-turbolinks-track="reload">
  <script src="./Segregated Witness is cool_files/build.blog-77b9d11de5eaac0ee062d3f66c7c10ad2911e0070d73d485f8979c89b46c0ba9.js.download" data-turbolinks-track="reload"></script><style type="text/css"></style>
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-41994323-1');
  ga('send', 'pageview');
  </script><style type="text/css">.tk-proxima-nova{font-family:"proxima-nova",sans-serif;}.tk-freight-sans-pro{font-family:"freight-sans-pro",sans-serif;}</style><style type="text/css">@font-face{font-family:tk-proxima-nova-n7;src:url(https://use.typekit.net/af/7d485b/00000000000000003b9ad1b1/27/l?subset_id=2&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/7d485b/00000000000000003b9ad1b1/27/d?subset_id=2&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/7d485b/00000000000000003b9ad1b1/27/a?subset_id=2&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;}@font-face{font-family:tk-proxima-nova-n1;src:url(https://use.typekit.net/af/f6bc94/00000000000000003b9ad1bd/27/l?subset_id=2&fvd=n1&v=3) format("woff2"),url(https://use.typekit.net/af/f6bc94/00000000000000003b9ad1bd/27/d?subset_id=2&fvd=n1&v=3) format("woff"),url(https://use.typekit.net/af/f6bc94/00000000000000003b9ad1bd/27/a?subset_id=2&fvd=n1&v=3) format("opentype");font-weight:100;font-style:normal;}@font-face{font-family:tk-proxima-nova-n6;src:url(https://use.typekit.net/af/04b81b/00000000000000003b9ad1bb/27/l?subset_id=2&fvd=n6&v=3) format("woff2"),url(https://use.typekit.net/af/04b81b/00000000000000003b9ad1bb/27/d?subset_id=2&fvd=n6&v=3) format("woff"),url(https://use.typekit.net/af/04b81b/00000000000000003b9ad1bb/27/a?subset_id=2&fvd=n6&v=3) format("opentype");font-weight:600;font-style:normal;}@font-face{font-family:tk-proxima-nova-n4;src:url(https://use.typekit.net/af/c9cde8/00000000000000003b9ad1b9/27/l?subset_id=2&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/c9cde8/00000000000000003b9ad1b9/27/d?subset_id=2&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/c9cde8/00000000000000003b9ad1b9/27/a?subset_id=2&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;}@font-face{font-family:tk-proxima-nova-i4;src:url(https://use.typekit.net/af/4ba64f/00000000000000003b9ad1ba/27/l?subset_id=2&fvd=i4&v=3) format("woff2"),url(https://use.typekit.net/af/4ba64f/00000000000000003b9ad1ba/27/d?subset_id=2&fvd=i4&v=3) format("woff"),url(https://use.typekit.net/af/4ba64f/00000000000000003b9ad1ba/27/a?subset_id=2&fvd=i4&v=3) format("opentype");font-weight:400;font-style:italic;}@font-face{font-family:tk-proxima-nova-n3;src:url(https://use.typekit.net/af/3333ef/00000000000000003b9ad1b5/27/l?subset_id=2&fvd=n3&v=3) format("woff2"),url(https://use.typekit.net/af/3333ef/00000000000000003b9ad1b5/27/d?subset_id=2&fvd=n3&v=3) format("woff"),url(https://use.typekit.net/af/3333ef/00000000000000003b9ad1b5/27/a?subset_id=2&fvd=n3&v=3) format("opentype");font-weight:300;font-style:normal;}@font-face{font-family:tk-freight-sans-pro-n7;src:url(https://use.typekit.net/af/1709eb/000000000000000000010b60/27/l?subset_id=2&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/1709eb/000000000000000000010b60/27/d?subset_id=2&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/1709eb/000000000000000000010b60/27/a?subset_id=2&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;}@font-face{font-family:tk-freight-sans-pro-n9;src:url(https://use.typekit.net/af/3e9574/000000000000000000010b62/27/l?subset_id=2&fvd=n9&v=3) format("woff2"),url(https://use.typekit.net/af/3e9574/000000000000000000010b62/27/d?subset_id=2&fvd=n9&v=3) format("woff"),url(https://use.typekit.net/af/3e9574/000000000000000000010b62/27/a?subset_id=2&fvd=n9&v=3) format("opentype");font-weight:900;font-style:normal;}</style><style type="text/css">@font-face{font-family:proxima-nova;src:url(https://use.typekit.net/af/7d485b/00000000000000003b9ad1b1/27/l?subset_id=2&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/7d485b/00000000000000003b9ad1b1/27/d?subset_id=2&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/7d485b/00000000000000003b9ad1b1/27/a?subset_id=2&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;}@font-face{font-family:proxima-nova;src:url(https://use.typekit.net/af/f6bc94/00000000000000003b9ad1bd/27/l?subset_id=2&fvd=n1&v=3) format("woff2"),url(https://use.typekit.net/af/f6bc94/00000000000000003b9ad1bd/27/d?subset_id=2&fvd=n1&v=3) format("woff"),url(https://use.typekit.net/af/f6bc94/00000000000000003b9ad1bd/27/a?subset_id=2&fvd=n1&v=3) format("opentype");font-weight:100;font-style:normal;}@font-face{font-family:proxima-nova;src:url(https://use.typekit.net/af/04b81b/00000000000000003b9ad1bb/27/l?subset_id=2&fvd=n6&v=3) format("woff2"),url(https://use.typekit.net/af/04b81b/00000000000000003b9ad1bb/27/d?subset_id=2&fvd=n6&v=3) format("woff"),url(https://use.typekit.net/af/04b81b/00000000000000003b9ad1bb/27/a?subset_id=2&fvd=n6&v=3) format("opentype");font-weight:600;font-style:normal;}@font-face{font-family:proxima-nova;src:url(https://use.typekit.net/af/c9cde8/00000000000000003b9ad1b9/27/l?subset_id=2&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/c9cde8/00000000000000003b9ad1b9/27/d?subset_id=2&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/c9cde8/00000000000000003b9ad1b9/27/a?subset_id=2&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;}@font-face{font-family:proxima-nova;src:url(https://use.typekit.net/af/4ba64f/00000000000000003b9ad1ba/27/l?subset_id=2&fvd=i4&v=3) format("woff2"),url(https://use.typekit.net/af/4ba64f/00000000000000003b9ad1ba/27/d?subset_id=2&fvd=i4&v=3) format("woff"),url(https://use.typekit.net/af/4ba64f/00000000000000003b9ad1ba/27/a?subset_id=2&fvd=i4&v=3) format("opentype");font-weight:400;font-style:italic;}@font-face{font-family:proxima-nova;src:url(https://use.typekit.net/af/3333ef/00000000000000003b9ad1b5/27/l?subset_id=2&fvd=n3&v=3) format("woff2"),url(https://use.typekit.net/af/3333ef/00000000000000003b9ad1b5/27/d?subset_id=2&fvd=n3&v=3) format("woff"),url(https://use.typekit.net/af/3333ef/00000000000000003b9ad1b5/27/a?subset_id=2&fvd=n3&v=3) format("opentype");font-weight:300;font-style:normal;}@font-face{font-family:freight-sans-pro;src:url(https://use.typekit.net/af/1709eb/000000000000000000010b60/27/l?subset_id=2&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/1709eb/000000000000000000010b60/27/d?subset_id=2&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/1709eb/000000000000000000010b60/27/a?subset_id=2&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;}@font-face{font-family:freight-sans-pro;src:url(https://use.typekit.net/af/3e9574/000000000000000000010b62/27/l?subset_id=2&fvd=n9&v=3) format("woff2"),url(https://use.typekit.net/af/3e9574/000000000000000000010b62/27/d?subset_id=2&fvd=n9&v=3) format("woff"),url(https://use.typekit.net/af/3e9574/000000000000000000010b62/27/a?subset_id=2&fvd=n9&v=3) format("opentype");font-weight:900;font-style:normal;}</style>
<title>Segregated Witness is cool</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" href="https://lightning.svbtle.com/cargo/favicon-5ed3591b57f6a4f0d5cb82c6680b33bb1058fe757c71ccb094952824e7e00b17.ico"><link rel="icon" sizes="196x196" href="https://lightning.svbtle.com/cargo/apple-touch-icon-46ef722ec86669c235628c8ce6d7d6cf634bb7af91aa14aed5d9e52629a1949c.png"><link rel="mask-icon" href="https://lightning.svbtle.com/cargo/default-d31f6f2da1d2c55424ff6c05f10f35c76944917e33e8b5669a94db0023b704bd.svg" color="black"><meta name="generator" content="Svbtle.com"><meta name="description" content="Pieter Wuille gave a fantastic presentation on “Segregated Witness” in Hong Kong. It’s a great idea, and should be rolled into Bitcoin as soon as safely possible. It is the kind of fundamental idea that will have huge benefits in the future. It... | Gavin Andresen | Bitcoin developer. All-around geek."><link rel="canonical" href="http://gavinandresen.ninja/segregated-witness-is-cool"><meta property="og:url" content="http://gavinandresen.ninja/segregated-witness-is-cool"><meta property="twitter:card" content="summary"><meta property="twitter:site" content="@svbtle"><meta property="twitter:title" content="Segregated Witness is cool"><meta property="twitter:description" content="Pieter Wuille gave a fantastic presentation on “Segregated Witness” in Hong Kong. It’s a great idea, and should be rolled into Bitcoin as soon as safely possible. It is the kind of fundamental idea that will have huge benefits in the future. It... | Gavin Andresen | Bitcoin developer. All-around geek."><meta property="twitter:creator" content="@gavinandresen"><meta property="twitter:image:src" content="https://svbtleusercontent.com/lwXeiFp798zIO150C8s9XxiWCjbS4_large.jpg"><meta property="twitter:domain" content="http://gavinandresen.ninja"><meta property="og:title" content="Segregated Witness is cool • Gavin Andresen"><meta property="og:type" content="article"><meta property="og:description" content="Pieter Wuille gave a fantastic presentation on “Segregated Witness” in Hong Kong. It’s a great idea, and should be rolled into Bitcoin as soon as safely possible. It is the kind of fundamental idea that will have huge benefits in the future. It... | Gavin Andresen | Bitcoin developer. All-around geek."><meta property="og:image" content="https://svbtleusercontent.com/lwXeiFp798zIO150C8s9XxiWCjbS4_large.jpg"><meta property="og:site_name" content="Gavin Andresen on Svbtle"><meta property="fb:app_id" content="346346195413177"><link rel="alternate" type="application/rss+xml" href="http://gavinandresen.ninja/feed"></head>
<body class="overlord blog loaded">
<style scoped="">
figure.avatar a,
figure#user_logo a,
figure#user_foot a,
nav#overlord.user_top figure#logo_top a,
figure.kudo.complete div.filling {
  background-image: url('https://svbtleusercontent.com/lwXeiFp798zIO150C8s9XxiWCjbS4_medium.jpg')
}

figure.kudo.activated div.filling,
figure.kudo.complete div.filling {
  background-color: #F0A590;
}

figure.kudo.activated a,
figure.kudo.complete a {
  border-color: #F0A590;
}

blockquote,
a blockquote,
div#readnext:hover span.flank_title,
div#foot_more:hover a,
div#foot_userbar a#bottom_tagline span:hover,
article.linked h1.article_title a:hover,
a.continue_button:hover,
article p a:hover,
ul#lightning_drop,
figure#user_logo,
figure#user_foot,
ul#user_links li a:hover,
ul#foot_links li a:hover,
a.buttonize:hover,
button.buttonize:hover,
a.buttonize.outline:hover,
button.buttonize.outline:hover,
nav.pagination span.next a:hover,
nav.pagination span.prev a:hover,
section#readnext:hover p span,
nav#overlord.user_top figure#logo_top {
  border-color: #F0A590;
}

figure.avatar,
nav#overlord.user_top figure#logo_top a,
ul#user_links li a:hover,
ul#foot_links li a:hover,
a.buttonize:hover,
button.buttonize:hover,
a.buttonize.outline:hover,
button.buttonize.outline:hover,
nav.pagination span.next a:hover,
nav.pagination span.prev a:hover,
figure#user_logo a,
figure#user_foot a  {
	background-color: #F0A590;
}

h6.separator_title.read_first,
header#user_top h2 a,
footer#blog_foot h5 a,
article.post h1 a:hover,
div.preview strong,
nav#overlord h2#nav_title.user_top a,
section#readnext:hover h3,
section#readnext:hover p span {
  color: #F0A590;
}

@keyframes titlePulse
  {
  0% {
    color: #000000;
  }
  50% {
    color: #F0A590;
  }
  100% {
    color: #000000;
  }
}

@-moz-keyframes titlePulse
  {
  0% {
    color: #000000;
  }
  50% {
    color: #F0A590;
  }
  100% {
    color: #000000;
  }
}

@-webkit-keyframes titlePulse
  {
  0% {
    color: #000000;
  }
  50% {
    color: #F0A590;
  }
  100% {
    color: #000000;
  }
}


</style>

<figure id="loading">&nbsp;</figure>
<nav id="overlord" class="user_top">
  <figure id="logo_top" class="">
    <a href="http://gavinandresen.ninja/">Svbtle</a>
  </figure>
  <h2 id="nav_title" class="user_top"><a href="http://gavinandresen.ninja/">Gavin Andresen</a></h2>
  <figure id="hamburger">
    <a href="http://gavinandresen.ninja/segregated-witness-is-cool#menu" id="hamburger_button">Menu</a>
  </figure>
  <ul id="dropdown" class="onblog">
    <li class="dropdown_message">
     <a href="https://svbtle.com/">Gavin Andresen is writing on the <span class="logoize">Svbtle</span> network.</a>
    </li>
    <li><a href="https://twitter.com/gavinandresen" class="twitter" target="_blank">@gavinandresen</a></li>
    <li><a href="mailto:gavinandresen@gmail.com?subject=hi%20from%20svbtle">say&nbsp;hello</a></li>
    <li><a href="http://gavinandresen.ninja/feed">rss feed</a></li>
    <li style="margin: 0; padding: 0;"><hr class="overlord_nav"></li>
    <li><a href="https://svbtle.com/about">about svbtle</a></li>
    <li><a href="https://svbtle.com/signup">sign up</a></li>
  </ul>
</nav>
<div id="whiteout"></div>

<section id="container" class="blog user_post">
  <article id="jDNfwb1aatfgzhdqYvWieC" class="post  historical">
	<time datetime="2015-12-08" class="article_time">December  8, 2015</time>
  <h1 class="article_title">
    <a href="http://gavinandresen.ninja/segregated-witness-is-cool">Segregated Witness is cool</a>
  </h1>
	<p>Pieter Wuille gave a fantastic presentation on “Segregated Witness” in Hong Kong. It’s a great idea, and should be rolled into Bitcoin as soon as safely possible. It is the kind of fundamental idea that will have huge benefits in the future. It also needs a better name (“segregated” has all sorts of negative connotations…).</p>

<p>You should <a href="https://www.youtube.com/watch?v=fst1IK_mrng#t=36m" rel="nofollow">watch Pieter’s presentation</a>, but I’ll give a different spin on explaining what it is (I know I often need something explained to me a couple different ways before I really understand it).</p>

<p>So… sending bitcoin into a segregate witness-locked output will look like a weird little beastie in today’s blockchain explorers– it will look like an “anyone can spend” transaction, with a scriptPubKey of:</p>

<p><code class="prettyprint">PUSHDATA [version_byte + validation_script]</code></p>

<p>Spends of segregated witness-locked outputs will have a completely empty scriptSig.</p>

<p>The reason that is not insane is because the REAL scriptSig for the transaction will be put in a separate, new data structure, and wallets and miners that are doing validation will use that new data structure to make sure the signatures for the transaction are valid, etc.</p>

<p>That data structure will be a merkle tree that mirrors the transaction merkle tree that is put into the block header of every block. Every transaction with a segregated witness input will have an entry in that second merkle tree with the signature data in it (plus 10 or so extra bytes per input to enable fraud proofs).</p>

<p>The best design is to combine the transaction and segregated witness merkle trees into one tree, with the left side of the tree being the transaction  data and the right side the segregated witness data. The merkle root in the block header would just be that combined tree. That could (and should, in my opinion) be done as a hard fork; Pieter proposes doing it as a soft fork, by stuffing the segregated witness merkle root into the first (coinbase) transaction in each block, which is more complicated and less elegant but means it can be rolled out as a soft fork.</p>

<p>Regardless of how it is rolled out, it would be a smooth transition for wallets and most end-users– if you don’t want to use newfangled segregated witness transactions, you don’t have to.  Paying to somebody who <em>is</em> using the newfangled transactions looks just like paying to somebody using a newfangled multisig wallet (a ‘3something’ BIP13 bitcoin address).</p>

<p>There is no requirement that wallets upgrade, but anybody generating a lot of transactions will have a strong incentive to produce segregated witness transactions– Pieter proposes to give segregated witness transactions a discount on transaction fees, by not completely counting the segregated witness data when figuring out the fee-per-kilobyte transaction charge.</p>

<p>So… how does all of this help with the one megabyte block size limit?</p>

<p>Well, once all the details are worked out, and the soft or hard fork is past, and a significant fraction of transactions are spending segregated witness-locked outputs… more transactions will fit into the 1 megabyte hard limit.  For example, the simplest possible one-input, one-output segregated witness transaction would be about 90 bytes of transaction data plus 80 or so bytes of signature– only those 90 bytes need to squeeze into the one megabyte block, instead of 170 bytes. More complicated multi-signature transactions save even more.</p>

<p>So once everybody has moved their coins to segregated witness-locked outputs and all transactions are using segregated witness, two or three times as many transactions would squeeze into the one megabyte block limit.</p>

<p>Segregated witness transactions won’t help with the current scaling bottleneck, which is how long it takes a one-megabyte ‘block’ message to propagate across the network– they will take just as much bandwidth as before. There are several projects in progress to try to fix that problem (IBLTs, weak blocks, thin blocks, a “blocktorrent” protocol) and one that is already deployed and making one megabyte block propagation much faster than it would otherwise be (Matt Corallo’s fast relay network).</p>

<p>I think it is wise to <a href="http://gavinandresen.ninja/designing-for-success" rel="nofollow">design for success</a>. Segregated witness is cool, but it isn’t a short-term (within the next six months to a year) solution to the problems we’re already seeing as we run into the one-megabyte block size limit.</p>

  <figure class="postend kudo able clearfix" id="kudo_jDNfwb1aatfgzhdqYvWieC">
    <a href="http://gavinandresen.ninja/segregated-witness-is-cool#kudo">
      <div class="filling">&nbsp;</div>
    </a>
    <div class="num">548</div>
    <div class="txt">Kudos</div>
  </figure>
  <figure class="side kudo able clearfix" id="kudo_side_jDNfwb1aatfgzhdqYvWieC">
    <a href="http://gavinandresen.ninja/segregated-witness-is-cool#kudo">
      <div class="filling">&nbsp;</div>
    </a>
    <div class="num">548</div>
    <div class="txt">Kudos</div>
  </figure>
</article>

</section>
<section id="readnext">
  <a href="http://gavinandresen.ninja/when-the-block-reward-goes-away">
    <h4 class="readnext_header">Now read this</h4>
    <h3 class="readnext_title">When the block reward goes away…</h3>
    <p class="readnext_content">Discussions of raising the maximum block size often turn into discussions of Bitcoin’s very-long-term future – “but what about when the block reward goes to zero” or “but how, exactly, will it all work if Bitcoin is used by billions of... <span class="continue_btn">Continue&nbsp;→</span></p>
  </a>
</section>
<footer id="blog_foot" class="cf">
  <ul id="foot_links">
    <li><a href="https://twitter.com/gavinandresen">@gavinandresen</a></li>
    <li><a href="mailto:gavinandresen@gmail.com?subject=Svbtle">say hello</a></li>
  </ul>
  <figure id="user_foot"><a href="http://gavinandresen.ninja/">Svbtle</a></figure>
  <h5><a href="http://gavinandresen.ninja/">Gavin Andresen</a></h5>
</footer>
<footer id="foot">
  <figure id="logo_foot"><a href="https://svbtle.com/">Svbtle</a></figure>
  <a href="https://svbtle.com/terms" style="color: #ccc; margin-left: 25px;">Terms</a> <span style="color: #ccc;">•</span> <a href="https://svbtle.com/privacy" style="color: #ccc;">Privacy</a>
  <span style="color: #ccc;">•</span> <a href="https://svbtle.com/promise" style="color: #ccc; margin-right: 15px;">Promise</a>
  <br><br>
</footer>

<div id="lights">&nbsp;</div>


</body></html>